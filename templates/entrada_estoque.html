{% extends 'base.html' %}
{% block titulo %}Entrada de Itens{% endblock %}

{% block conteudo %}
<h2>Registrar Entrada de Itens</h2>

<!-- 🔍 Campo de pesquisa destacado fora da tabela -->
<form method="POST" action="/itens/entrada" style="margin-bottom: 20px;">
  <input type="text" name="termo" placeholder="Buscar item..." style="padding: 8px; width: 60%;" value="{{ termo or '' }}">
  <button type="submit" name="acao" value="buscar" style="padding: 8px;">🔍 Pesquisar</button>
</form>


<div style="display: flex; gap: 30px; align-items: flex-start; flex-wrap: wrap;">

  <!-- Formulário de Entrada -->
  <div style="flex: 1; min-width: 300px;">
    <form method="POST">
      <label for="item_id"><strong>ID do Item:</strong></label><br>
      <input type="text" name="item_id" id="item_id" value="{{ item_id }}" required placeholder="Digite o ID do item" style="width: 100%; padding: 8px;"><br><br>

      <label><strong>Nome do Item:</strong></label><br>
      <input type="text" value="{{ descricao }}" readonly style="width: 100%; padding: 8px;"><br><br>

      <label><strong>Referência:</strong></label><br>
      <input type="text" value="{{ referencia }}" readonly style="width: 100%; padding: 8px;"><br><br>

      <label><strong>Quantidade a adicionar:</strong></label><br>
      <input type="text" name="quantidade" value="{{ quantidade }}" style="width: 100%; padding: 8px;"><br><br>

      <label><strong>Estoque:</strong></label><br>
      <input type="text" name="estoque" value="{{ estoque }}" style="width: 100%; padding: 8px;"><br><br>

      <button type="submit" style="background-color: #cc0000; color: white; padding: 10px 20px; border: none;">
        Registrar Entrada
      </button>
    </form>
  </div>

  <!-- Lista com rolagem -->
  <div style="flex: 1.5; min-width: 400px; max-height: 500px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; border-radius: 6px; background-color: #f9f9f9;">
    <h3>Itens Cadastrados</h3>
    <table border="1" cellpadding="6" cellspacing="0" style="width: 100%; font-size: 14px;">
      <thead style="background-color: #003366; color: white; position: sticky; top: 0;">
        <tr>
          <th>ID</th><th>Descrição</th><th>Referência</th>
        </tr>
      </thead>
      <tbody>
        {% for item in itens %}
        <tr>
          <td>{{ item.id }}</td>
          <td>{{ item.descricao }}</td>
          <td>{{ item.referencia }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
